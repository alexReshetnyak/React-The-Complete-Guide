1
00:00:02,140 --> 00:00:10,000
As que continuemos nuestro camino hacia un mundo centrado en el creador de accin pura al subcontratar tambin el generador de hamburguesas y

2
00:00:10,180 --> 00:00:13,630
el cdigo creador de acciones en Sagas. Comencemos con el

3
00:00:13,870 --> 00:00:15,770
creador de hamburguesas, si analizamos el

4
00:00:15,940 --> 00:00:20,290
archivo creador de acciones del creador de hamburguesas, es muy simple, tenemos un

5
00:00:20,290 --> 00:00:23,390
Muchos creadores de accin pura ya estn ah, por

6
00:00:23,440 --> 00:00:27,630
lo que los creadores de accin que solo lo hacen crean una accin.

7
00:00:27,940 --> 00:00:35,050
Pero tenemos un creador de accin initIngredients que realmente ejecuta un cdigo asncrono que ejecuta un efecto secundario, as que

8
00:00:35,050 --> 00:00:36,390
para eso, crear un

9
00:00:36,400 --> 00:00:45,010
nuevo archivo en la carpeta de sagas BurgerBuilder. js. All, crear mi saga initIngredients,

10
00:00:45,030 --> 00:00:49,900
que ser exportada a la funcin del generador, agregar

11
00:00:50,780 --> 00:00:59,840
saga despus del nombre, obtendremos nuestra accin all y ahora tomar el cdigo de initIngredients y lo

12
00:01:00,710 --> 00:01:02,790
pondr en BurgerBuilder. js

13
00:01:02,800 --> 00:01:04,160
archivo aqu.

14
00:01:04,930 --> 00:01:06,830
Ahora usamos axios aqu, pero si

15
00:01:06,950 --> 00:01:12,950
volvemos al archivo generador de hamburguesas en la carpeta de acciones, vemos que realmente importamos axios de

16
00:01:13,040 --> 00:01:18,930
nuestra instancia personalizada, para que usemos nuestra instancia de axios personalizada del archivo de pedidos de axios.

17
00:01:19,040 --> 00:01:25,340
As que usar la misma importacin aqu en mi archivo saga porque obviamente quiero usar la misma instancia

18
00:01:25,340 --> 00:01:35,340
de axios aqu, eso significa que tambin podemos deshacernos de l en el BurgerBuilder. js archivo en la carpeta de acciones.

19
00:01:35,490 --> 00:01:41,910
Ahora de vuelta en el BurgerBuilder. js file en la carpeta sagas, importamos axios,

20
00:01:41,970 --> 00:01:48,720
ahora si echamos un vistazo a la autenticacin. js, vemos que tambin deberamos importar los efectos

21
00:01:48,770 --> 00:01:53,790
de la saga redux para poder enviar acciones desde nuestra saga.

22
00:01:53,820 --> 00:02:00,610
As que permtanme agregar esta importacin aqu tambin y con eso, usar el mismo enfoque que hicimos antes,

23
00:02:00,620 --> 00:02:08,060
voy a almacenar la respuesta aqu en la constante de respuesta y usar el rendimiento para esperar que se devuelva

24
00:02:08,090 --> 00:02:11,190
y para que sea automticamente obtenga los datos

25
00:02:11,200 --> 00:02:19,190
que esta promesa nos brinda una vez que se resuelve y para manejar tambin una falla, lo envolver con la prueba.

26
00:02:19,520 --> 00:02:24,680
As que tratar de obtener mi constante, mi respuesta aqu debera decir, pero

27
00:02:24,820 --> 00:02:32,110
si eso falla, entonces entraremos al bloque catch aqu y captaremos cualquier error que podamos tener y luego lo

28
00:02:34,370 --> 00:02:37,350
manejaremos en el bloque a partir de entonces.

29
00:02:37,670 --> 00:02:41,810
Ahora, lo nico que hago es despachar algo, as que en

30
00:02:41,810 --> 00:02:49,640
el mundo de la saga, hacemos esto al ceder un put call y lo que hacemos es, por supuesto, que nuestro

31
00:02:49,640 --> 00:02:57,770
creador de acciones llama aqu donde transmitimos los datos que obtuvimos. Para eso, tendr que importarlos, as que importar todo como acciones

32
00:02:57,830 --> 00:03:00,340
desde y ahora vamos a la carpeta

33
00:03:00,350 --> 00:03:05,610
de acciones y al archivo de ndice, que tambin podemos importar de esa manera

34
00:03:05,630 --> 00:03:13,640
con solo referirnos a la carpeta como un todo . Y luego puedo ceder acciones put y ahora se

35
00:03:13,850 --> 00:03:15,820
requieren setIngredients aqu, para

36
00:03:15,830 --> 00:03:22,520
eso debemos asegurarnos de que en el ndice. el archivo js en la carpeta de acciones, setIngredients se proporciona realmente,

37
00:03:22,550 --> 00:03:23,990
actualmente no lo est, as

38
00:03:24,230 --> 00:03:32,480
que vamos a agregarlo como una exportacin desde el archivo de generador de hamburguesas all, setIngredients. Tambin tenemos fetchIngredients aqu, tambin deberamos

39
00:03:32,490 --> 00:03:34,240
exportar esto

40
00:03:34,410 --> 00:03:38,360
del generador de hamburguesas, as

41
00:03:38,460 --> 00:03:47,240
que vamos a agregar esto tambin. Con estas dos exportaciones agregadas, podemos volver a nuestra saga y enviar acciones para

42
00:03:47,250 --> 00:03:50,230
establecer los ingredientes, transmitir los datos de respuesta, joder,

43
00:03:51,070 --> 00:03:53,010
disclpame, aqu por supuesto, as que

44
00:03:53,110 --> 00:04:01,300
pasa los datos de respuesta o en el caso de error, pon acciones. fetchIngredientsFailed, asegrate de ejecutar tambin eso,

45
00:04:01,330 --> 00:04:02,740
luego puedes

46
00:04:02,730 --> 00:04:07,310
eliminar el cdigo de catch all.

47
00:04:07,320 --> 00:04:09,750
Esta es nuestra saga

48
00:04:10,090 --> 00:04:17,890
recin creada, volvamos ahora al ndice. js all y registrarlo, y para esto, exportar un nuevo generador

49
00:04:17,900 --> 00:04:23,550
aqu que nombrar watchBurgerBuilder para agrupar todo el cdigo relacionado con el generador de hamburguesas.

50
00:04:23,710 --> 00:04:30,280
Tcnicamente podramos agregarlo aqu tambin y podramos tener una gran funcin de reloj o generador pero

51
00:04:30,280 --> 00:04:31,770
me gustara tener varios

52
00:04:32,350 --> 00:04:35,650
y luego, tambin importar mis sagas, aqu solo

53
00:04:35,680 --> 00:04:40,850
hay una pero podra ser ms. / BurgerBuilder y esa nica

54
00:04:41,190 --> 00:04:45,080
saga que tenemos, por supuesto, es la

55
00:04:45,430 --> 00:04:47,540
saga de iniciadores.

56
00:04:47,800 --> 00:04:49,660
As que en watchBurgerBuilder, generar

57
00:04:49,870 --> 00:04:50,980
takeEvery tipos de

58
00:04:51,040 --> 00:04:54,230
accin y ahora necesito un nuevo tipo de

59
00:04:54,430 --> 00:05:00,460
accin que realmente despachamos en el archivo de generador de hamburguesas en el creador de acciones

60
00:05:00,460 --> 00:05:02,770
o en la carpeta de acciones.

61
00:05:02,860 --> 00:05:08,890
Entonces, la accin que realmente creamos aqu ahora porque ya no quiero devolver el despacho y

62
00:05:08,890 --> 00:05:12,550
ejecutar el cdigo asincrnico, solo quiero crear una accin.

63
00:05:12,820 --> 00:05:18,690
As que vamos a crear un nuevo tipo de accin para eso, crear una constante aqu

64
00:05:18,690 --> 00:05:20,820
en la carpeta de tipos de

65
00:05:20,850 --> 00:05:25,310
accin que denominar INIT_INGREDIENTS, as como se llama al creador de la

66
00:05:25,310 --> 00:05:31,890
accin, INIT_INGREDIENTS, as y en el creador de acciones, en el archivo del generador de hamburguesas en la

67
00:05:32,250 --> 00:05:38,710
carpeta de acciones, establecer el tipo en actionTypes. INIT_INGREDIENTS.

68
00:05:38,740 --> 00:05:41,350
Entonces este es el tipo de accin

69
00:05:41,410 --> 00:05:49,330
al que desea escuchar, entonces en el ndice. js file, escuchar actionTypes. INIT_INGREDIENTS y I ejecutarn initIngredientsSaga

70
00:05:49,410 --> 00:05:51,990
siempre que esto ocurra.

71
00:05:52,210 --> 00:06:00,100
El ltimo paso es llamar tambin a esta funcin de generador recin creada desde nuestro ndice. JS archivo en el nivel de raz de

72
00:06:00,100 --> 00:06:07,280
nuestra aplicacin, por as decirlo, donde tenemos saga middleware ejecutar watch off, tambin voy

73
00:06:07,390 --> 00:06:09,640
a agregar saga middleware

74
00:06:09,850 --> 00:06:16,270
ejecutar y ahora vamos a importar esto desde nuestra carpeta sagas para ver

75
00:06:16,550 --> 00:06:21,540
Burger Builder, esta saga aqu tambin debera ser ejecutado al

76
00:06:21,580 --> 00:06:25,650
inicio sin parntesis aqu. Ahorremos todo eso y esto

77
00:06:26,110 --> 00:06:26,920
se ve

78
00:06:26,920 --> 00:06:30,440
bien, todava iniciamos nuestros ingredientes aqu con xito.

79
00:06:30,550 --> 00:06:37,060
Si vuelvo a cargar esta aplicacin una vez ms, vemos que se enva

80
00:06:37,060 --> 00:06:45,720
setIngredients aqu y establecemos los ingredientes, y esto funciona porque tenemos nuestra saga Burger Builder donde obtenemos setIngredients.

81
00:06:45,880 --> 00:06:53,610
Si lo comento aqu, ver que tenemos una pantalla de carga infinita porque nunca establecemos los ingredientes, as que

82
00:06:53,700 --> 00:06:57,570
realmente podemos decir que nuestra saga est funcionando correctamente aqu.

83
00:06:57,780 --> 00:06:59,070
Djame comentarlo de nuevo.


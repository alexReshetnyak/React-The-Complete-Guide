1
00:00:02,190 --> 00:00:07,830
Auth'a geri. eylemler klasrnde js dosyas, biz zaten yaratk

2
00:00:07,830 --> 00:00:14,430
olarak destan iine destan klasrne olduka manta bir ok outsourced ve bu nedenle biz zaten artk aktans

3
00:00:14,850 --> 00:00:17,440
ithalat ihtiyacm var, ok yaln bir action

4
00:00:17,460 --> 00:00:23,670
creator dosya olsun Bu ie aktarmay kaldrn ve imdi yalnzca eylemleri dndren eylem ierik oluturucularmz var,

5
00:00:23,670 --> 00:00:24,110
gerekten

6
00:00:24,150 --> 00:00:27,490
de bunu yapyoruz, bir istisna dnda eylemler oluturuyorlar.

7
00:00:27,690 --> 00:00:35,370
Bu dosyann en altnda, uygulamamzn otomatik olarak oturum ap aamayacamz grmeye baladmz anda

8
00:00:35,370 --> 00:00:40,600
uygulayacamz authCheckState action creator'unu aldk, bu da bir destann

9
00:00:40,950 --> 00:00:43,480
sonuna kadar devam etmeli,

10
00:00:43,710 --> 00:00:52,110
en az deil. burada da destan. Adlandrcmz authCheckStateSaga isminin ismini buraya authCheckStateSaga olarak isimlendirdiim gibi

11
00:00:52,110 --> 00:00:54,190
adlandracam, bu yzden authCheckStateSaga

12
00:00:55,200 --> 00:00:57,920
ismini vereceim, buradaki ad, argman olarak

13
00:00:58,020 --> 00:01:07,130
islemimi alacam ve yine tm kodu benim halimden kopyalayacam. js.

14
00:01:07,380 --> 00:01:11,260
eylemler klasrnde dosya ve adm adm olarak deitirin.

15
00:01:11,670 --> 00:01:13,320
Peki burada ne yapyoruz?

16
00:01:13,530 --> 00:01:16,390
Yerel depodan belirteci alrz, sag'larmda

17
00:01:16,440 --> 00:01:22,230
yrttm tm admlar iin yaptm verimi de buraya ekleyeceim.

18
00:01:22,380 --> 00:01:28,380
yleyse imdi senkronize bir grev olan jetonu aldk, sonra belirtecin gerekten var olup olmadn

19
00:01:28,380 --> 00:01:29,880
kontrol ederim ve eer

20
00:01:30,210 --> 00:01:38,810
deilse, tabii ki hala buradan k yapmak istiyorum, harekete geeceim. Temel olarak bunu gndermek iin k ve burada

21
00:01:38,810 --> 00:01:42,610
da getiri katacam. imdi yapacamz bir

22
00:01:42,630 --> 00:01:50,460
sonraki ey, eer geerli bir belirteimiz varsa, son kullanma tarihini kontrol ediyoruz, biz

23
00:01:50,460 --> 00:01:57,150
hesaplyoruz, bunu da vereceim ve eer imdiki tarihimizden daha erken ise,

24
00:01:57,300 --> 00:02:03,050
ben de oturumu kapatmak istiyorum. geersiz bir son kullanma tarihimiz var.

25
00:02:03,180 --> 00:02:11,280
Else, yerel depolama alanndan bir kullanc kimlii alacak ve bunu saladktan sonra baarl

26
00:02:11,280 --> 00:02:14,780
olduk, bu yzden burada authSuccess koydum

27
00:02:14,790 --> 00:02:16,070
ve jeton

28
00:02:16,080 --> 00:02:23,010
ve kullanc kimliini ileteceim, ancak burada hem burada hem de AuthSuccess

29
00:02:23,010 --> 00:02:27,530
eylem nesnesine eriilebilmeli Bu eylem oluturucular kullanmak

30
00:02:27,540 --> 00:02:30,310
iin ie aktarma ve

31
00:02:30,340 --> 00:02:38,290
ayn zamanda bu eylem oluturucuya atfta bulunan eylemler checkAuthTiemout'u vermek istiyorum. Bu ilem,

32
00:02:38,290 --> 00:02:43,330
bir baka destan tetikleyecek olan bu authCheckoutTimeout eylemini dndrr.

33
00:02:43,330 --> 00:02:52,790
Bu aslnda tm bunlar, ihtiyacmz olan tm deiiklikler bunlar benim authCheckStateSaga.

34
00:02:53,060 --> 00:03:00,240
imdi bunu takmak ve uygulamay balattmz anda idam edildiinden emin olmak

35
00:03:00,350 --> 00:03:07,210
istiyoruz, nk bu konuya gideceim. js action creator dosyas ve buradaki tm kodu geri

36
00:03:07,210 --> 00:03:09,180
dndrn, artk buna ihtiyacm yok.

37
00:03:09,620 --> 00:03:16,460
Bunun yerine, sadece eylem nesnesini dndrmek istiyorum ve bunun iin yeni bir

38
00:03:16,460 --> 00:03:25,900
eylem tr oluturacam, rnein AUTH_CHECK_INITIAL_STATE olarak adlandracam, tabii ki dersin ad tamamen size kalm, bunu burada da

39
00:03:26,900 --> 00:03:29,390
kullanabilirsin, belki de AUTH_CHECK_STATE

40
00:03:29,510 --> 00:03:36,410
adn, ilem yaratcmzn adyla daha uyumlu hale getirmek iin AUTH_CHECK_STATE olarak adlandrn.

41
00:03:37,580 --> 00:03:38,780
Ardndan AUTH_CHECK_STATE

42
00:03:38,880 --> 00:03:47,520
ve ardndan aadakini yazn, tip actionTypes eylemimi geri dndreceim. AUTH_CHECK_STATE ve bu ilemle ilgili herhangi bir

43
00:03:47,520 --> 00:03:49,800
argman veya herhangi bir

44
00:03:49,830 --> 00:03:57,410
eyi iletmemize gerek yok, imdi authCheckStateSaga'y burada tetiklemeli ve bunu etkinletirmek iin dizinde

45
00:03:57,600 --> 00:04:02,020
bir dinleyici ayarlamam gerekiyor. js dosyas,

46
00:04:02,040 --> 00:04:14,120
orada actionTypes iin getEvery vereceim. AUTH_CHECK_STATE ve yeni oluturulan authCheckStateSaga'y, bu

47
00:04:14,120 --> 00:04:15,530
eylem

48
00:04:15,590 --> 00:04:22,340
tr alglandnda gerekletireceim. Deitirdiimiz tm dosyalar saklayalm, geri

49
00:04:22,410 --> 00:04:30,760
dnelim ve uygulamay yeniden ykleyelim, authSuccess'i gryoruz, bu yzden otomatik olarak baaryla giri yaptk.

50
00:04:30,980 --> 00:04:33,390
imdi k yapp tekrar

51
00:04:33,890 --> 00:04:41,630
ykleyelim ve imdi gryorsunuz, hala kontrol durumu arsn balatyor ama sonra geerli bir belirte

52
00:04:41,630 --> 00:04:44,150
bulamad iin k ilemini balatyor.

53
00:04:44,180 --> 00:04:52,790
Yani imdi ilediimiz tm yan etkilerin yerini auth'a braktk. js action creator dosyas ile saga dosyamzdaki kod, dinleyicilerimiz

54
00:04:52,790 --> 00:04:54,680
tarafndan idam ettiim sagaslar,

55
00:04:54,880 --> 00:05:02,480
buradaki izleyicilerimiz de burada endekste burada yrtlr. js dosyas, bizim destan

56
00:05:02,480 --> 00:05:06,130
ara katmanmzda altryoruz.

57
00:05:06,440 --> 00:05:12,990
Ve bununla birlikte, redux-thunk'u uygulamamzn auth ksm iin tamamen gereksiz hale getirdik,

58
00:05:13,040 --> 00:05:20,210
imdi tamamen kaldrabilmemiz iin, elbette burger reticisi paras ve sipari ksm iin gereksiz hale

59
00:05:20,210 --> 00:05:23,440
getirmemiz gerekiyor ve bu zaten senin

60
00:05:23,660 --> 00:05:26,250
iin harika bir uygulama ol.

61
00:05:26,270 --> 00:05:27,450
yle hissediyorsan, kesinlikle

62
00:05:27,530 --> 00:05:29,490
bunu kendi bana dene.

63
00:05:29,510 --> 00:05:31,420
Yeni dosyalarda daha fazla sagas

64
00:05:31,490 --> 00:05:33,040
eklemeye aln, izleyicileri kurun

65
00:05:33,170 --> 00:05:40,390
ve burgerBuilder'da bulunan kodu deitirin. eylemler klasrnde ve srayla js. Tm yan etkilerinizi d kaynaklara

66
00:05:40,400 --> 00:05:48,290
aktarmak iin destans kodlu eylemler klasrnde js. Bunu bir sonraki videoyla

67
00:05:48,290 --> 00:05:50,660
balayarak birlikte yapacaz.


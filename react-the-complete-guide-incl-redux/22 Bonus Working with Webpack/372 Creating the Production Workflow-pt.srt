1
00:00:02,190 --> 00:00:06,800
Ento terminamos a configurao do desenvolvimento nas ltimas palestras, corrigimos alguns bugs, mas

2
00:00:06,810 --> 00:00:09,680
agora temos uma configurao funcional que  tima.

3
00:00:09,710 --> 00:00:15,470
Agora, o prximo passo  trabalhar no fluxo de trabalho de produo, no meu pacote. json file, eu quero ter um segundo

4
00:00:15,480 --> 00:00:17,720
script, vamos nome-lo build e aqui

5
00:00:17,760 --> 00:00:18,910
eu no quero

6
00:00:19,230 --> 00:00:24,550
rodar o webpack-dev-server mas o webpack. Agora, se eu fosse execut-lo assim,

7
00:00:24,570 --> 00:00:28,170
usaria a configurao do fluxo de trabalho de desenvolvimento.

8
00:00:28,410 --> 00:00:33,180
Podemos realmente fazer isso para ver a sada porque o servidor de desenvolvimento fez tudo

9
00:00:33,180 --> 00:00:40,260
na memria, agora podemos criar os arquivos reais executando npm run build, tudo exceto o script de incio tem que ser executado

10
00:00:40,260 --> 00:00:46,860
com npm run, start  a exceo com npm comear. Portanto, o npm run build agora executar o prprio

11
00:00:46,950 --> 00:00:53,350
webpack e pegar o mesmo arquivo de configurao com o qual trabalhamos antes, mas agora ele nos fornece

12
00:00:53,370 --> 00:00:59,670
essa pasta dist onde voc v o arquivo de imagem copiado e v os arquivos javascript aqui.

13
00:01:00,000 --> 00:01:06,040
Voc v o arquivo de ndice que ele copiou onde tambm injetou nossa importao e que  todo

14
00:01:06,210 --> 00:01:11,000
o cdigo que temos, agora o que voc pode ver este arquivo j  que

15
00:01:11,010 --> 00:01:13,260
ele no est realmente otimizado, esse certamente

16
00:01:13,410 --> 00:01:14,520
no  o

17
00:01:14,520 --> 00:01:22,370
cdigo que queremos enviar, ento eu vou deletar essa pasta por enquanto. O objetivo, em vez disso,  ter um fluxo de trabalho dedicado para produo que faa algumas otimizaes, ento o que

18
00:01:22,380 --> 00:01:30,570
eu farei  adicionar um segundo arquivo de configurao, o webpack. prod. config. js.

19
00:01:30,720 --> 00:01:33,530
Agora ele no levar este arquivo automaticamente em

20
00:01:33,720 --> 00:01:37,550
conta, ns teremos que apontar para ele, mas isso  super simples.

21
00:01:37,680 --> 00:01:43,640
Agora vou copiar a configurao do outro arquivo, do fluxo de trabalho de desenvolvimento para que possamos ajust-lo no

22
00:01:43,860 --> 00:01:45,020
fluxo de trabalho de

23
00:01:45,060 --> 00:01:47,450
produo, vamos ver o que precisamos ajustar.

24
00:01:47,520 --> 00:01:48,830
Vamos comear pelo topo,

25
00:01:48,900 --> 00:01:56,370
a ferramenta dev, aqui eu removerei o eval para criar mapas de origem mais otimizados que consumam menos recursos, ento voc pode

26
00:01:56,370 --> 00:01:59,760
sempre decidir se quer implement-los ou no, mas  bom

27
00:01:59,760 --> 00:02:05,100
ter mapas de origem aqui tambm para encontrar rapidamente alguns bugs no fluxo de trabalho de

28
00:02:05,100 --> 00:02:06,590
produo, se houver algum.

29
00:02:06,650 --> 00:02:15,880
Agora o arquivo de entrada ainda deve ser indexado. js e a sada tambm ainda faz sentido como ,

30
00:02:15,920 --> 00:02:18,550
agora os carregadores, e os carregadores?

31
00:02:18,710 --> 00:02:22,420
Bem, queremos aplicar as mesmas transformaes que no desenvolvimento, para

32
00:02:22,490 --> 00:02:28,820
que no precisemos tocar nos carregadores, faremos nosso trabalho na seo de plug-ins, agora temos um

33
00:02:28,820 --> 00:02:34,730
plug-in para conectar o arquivo html e queremos mant-lo , o que eu quero fazer

34
00:02:34,730 --> 00:02:42,680
agora  tambm eu quero melhorar minha sada, eu quero otimiz-la e que, na verdade,  um plugin que est embutido

35
00:02:42,680 --> 00:02:43,200
no

36
00:02:43,220 --> 00:02:45,010
webpack, ns no precisamos instal-lo.

37
00:02:45,380 --> 00:02:49,540
O que eu vou fazer  simplesmente importar o prprio

38
00:02:49,550 --> 00:02:52,640
webpack para esse arquivo, ento webpack via require

39
00:02:53,240 --> 00:03:01,610
webpack e ento podemos usar um dos plugins de build. Ento, na seo de plugins aqui, eu adicionarei este

40
00:03:01,610 --> 00:03:07,520
plugin, aqui eu adicionarei o novo webpack, otimize e l temos o

41
00:03:07,550 --> 00:03:10,160
plugin uglify js. Este plugin agora tambm

42
00:03:10,280 --> 00:03:12,040
pode ser configurado e voc

43
00:03:12,470 --> 00:03:17,390
sempre pode verificar as pginas oficiais do github de todos esses plugins e loaders para

44
00:03:17,480 --> 00:03:20,360
fazer isso, eu vou pegar a configurao padro, ento

45
00:03:20,660 --> 00:03:28,490
eu vou remover isso e com isso eu tenho o meu fluxo de trabalho de produo onde eu tambm otimizar os arquivos, onde

46
00:03:28,490 --> 00:03:31,210
eu minifico para enviar o menor cdigo possvel.

47
00:03:31,370 --> 00:03:38,510
Agora, para usar essa configurao, preciso ajustar meu pacote. json, os scripts de construo aqui onde eu aponto para o webpack, eu

48
00:03:38,510 --> 00:03:39,790
no quero usar a configurao

49
00:03:39,950 --> 00:03:42,440
padro ao invs disso eu quero usar um especial,

50
00:03:42,470 --> 00:03:48,800
ento eu vou usar o --config, que  um flag que ns podemos passar para o script do webpack e l eu

51
00:03:48,800 --> 00:03:55,520
vou apontar para o webpack. prod. config. arquivo js, pois est na mesma

52
00:03:55,520 --> 00:03:57,800
pasta que o pacote. arquivo json, eu

53
00:03:57,950 --> 00:03:59,570
no preciso especificar nenhum

54
00:03:59,630 --> 00:04:05,340
caminho, s posso especificar o nome do arquivo. Com isso, tambm adicionarei algumas opes adicionais,

55
00:04:05,360 --> 00:04:13,700
progresso, perfil, whoops, perfil e cores para ajustar a sada do console do fluxo de trabalho de criao do Webpack

56
00:04:13,730 --> 00:04:18,940
e instalarei um pacote adicional com npm install --save-dev, chamado rimraf e Ele

57
00:04:18,950 --> 00:04:26,210
nos permite excluir uma pasta ou arquivos e eu quero excluir a pasta dist no incio de cada

58
00:04:26,300 --> 00:04:33,770
processo de criao para que possamos criar um novo. Ento eu vou executar o rimraf dist primeiro e depois

59
00:04:33,800 --> 00:04:37,880
dois e sinais para rodar este projeto ou este comando aqui,

60
00:04:37,880 --> 00:04:42,800
desculpe-me depois que a excluso for feita. Com isso, vamos executar a compilao novamente,

61
00:04:43,040 --> 00:04:48,650
npm run build e vamos ver se isso nos d uma boa sada, isso me

62
00:04:48,710 --> 00:04:53,600
d um erro porque deveria ser --profile aqui como um sinalizador de webpack,

63
00:04:53,660 --> 00:04:54,530
ento vamos

64
00:04:54,530 --> 00:05:01,400
corrigir isso, salvar o arquivo e reexecutar npm run build. Agora, com isso, est construindo o projeto que podemos v-lo aqui, ele

65
00:05:02,380 --> 00:05:04,810
deve ter sucesso e funciona, ele nos d

66
00:05:04,900 --> 00:05:06,880
a pasta dist ainda, mas se dermos

67
00:05:06,910 --> 00:05:11,410
uma olhada no arquivo do pacote agora, voc ver que este  um cdigo reduzido.

68
00:05:11,410 --> 00:05:15,000
 um monte de cdigo, porque inclui a biblioteca completa de reagir, mas tudo isso

69
00:05:15,220 --> 00:05:21,770
 minimizado e, portanto, otimizado e o mesmo  claro em nosso 0. arquivo js.

70
00:05:21,790 --> 00:05:26,940
Ento agora temos nossa pasta dist e isso seria o que ns enviamos para um servidor,

71
00:05:26,950 --> 00:05:28,690
o contedo da pasta dist.

72
00:05:29,010 --> 00:05:34,720
Este  agora o nosso prprio fluxo de trabalho e espero que fique um pouco mais claro como o webpack funciona e como

73
00:05:34,720 --> 00:05:36,740
voc pode configurar um fluxo de trabalho personalizado.


1
00:00:02,190 --> 00:00:07,650
Recibimos el token y toda esa informacin al iniciar sesin y al iniciar sesin, obviamente queremos almacenar esto para

2
00:00:07,650 --> 00:00:16,290
poder en el futuro acceder tambin a los recursos en nuestro servidor que estn protegidos. Para almacenar ese token, ahora ir a mi carpeta de reductores

3
00:00:16,350 --> 00:00:23,210
y crear un nuevo archivo de reduccin auth. js, all quiero manejar estas acciones de

4
00:00:23,230 --> 00:00:29,360
autenticacin y mi estado de autenticacin. Para eso, primero importar todos mis tipos

5
00:00:29,400 --> 00:00:36,330
de accin aqu desde la carpeta de acciones y all, desde los tipos de accin

6
00:00:36,330 --> 00:00:43,890
porque los necesito en la declaracin de mi caja de cambios y luego crear mi funcin de

7
00:00:43,890 --> 00:00:51,430
reduccin, como siempre recibiendo el estado y el accin, exportar esto como el predeterminado de este archivo.

8
00:00:51,710 --> 00:01:01,070
Tambin establecer un estado inicial, por lo que el estado inicial debe ser un objeto javascript y, en

9
00:01:01,130 --> 00:01:07,520
este objeto javascript, quiero tener mi token, que es nulo inicialmente, tambin

10
00:01:07,520 --> 00:01:12,660
quiero almacenar mi ID de usuario que es nula inicialmente,

11
00:01:12,860 --> 00:01:20,720
tambin podemos almacenar un error aqu inicialmente nulo y quizs tambin cargando lo cual es falso.

12
00:01:20,720 --> 00:01:26,490
Ahora en mi reductor, agregar esta declaracin de maysculas y minsculas, cambiar el

13
00:01:26,720 --> 00:01:29,570
tipo de accin y all, verifico

14
00:01:29,900 --> 00:01:36,600
mis casos ahora, el primer caso es actionTypes. AUTH_START y all solo quiero devolver

15
00:01:36,620 --> 00:01:44,550
mi estado y ahora podemos usar nuestra funcin de utilidad para actualizar un objeto,

16
00:01:44,780 --> 00:01:56,270
por lo que lo importar tambin, importar updateObject del archivo de utilidad para devolver el estado actualizado con updateObject pasa el

17
00:01:56,690 --> 00:02:05,560
estado antiguo y actualiza solo el error, configralo como nulo nuevamente en caso de que cambie

18
00:02:05,600 --> 00:02:13,030
y se cargue, establcelo en verdadero aqu porque simplemente comenzamos a cargar aqu obviamente.

19
00:02:13,370 --> 00:02:17,320
Tambin tenemos que configurar un caso predeterminado para deshacerse de este

20
00:02:17,460 --> 00:02:20,460
error IDE, all simplemente devolver mi estado, as.

21
00:02:20,510 --> 00:02:25,060
Ahora hemos optimizado todos los dems reductores para tener declaraciones de caso de interruptor

22
00:02:25,050 --> 00:02:26,380
magro, hagmoslo aqu tambin.

23
00:02:26,480 --> 00:02:34,160
Crear una nueva funcin aqu que nombrar authStart donde obtengo el estado y la accin y donde

24
00:02:34,160 --> 00:02:44,030
simplemente deseo devolver este cdigo aqu, as que devuelva mi objeto de estado actualizado para que en este caso aqu pueda llamar

25
00:02:44,030 --> 00:02:51,900
a authStart, return es preciso porque todava necesito devolver un estado aqu en mi reductor, authStart y

26
00:02:51,910 --> 00:02:54,950
pasar el estado y la accin.

27
00:02:55,510 --> 00:03:03,040
Ahora agregar otra funcin a mi auth reducer, authSuccess, aqu tambin esperamos el

28
00:03:03,040 --> 00:03:12,600
estado y la accin, por supuesto, y all, tambin devolver un objeto actualizado, as que llamar a

29
00:03:12,660 --> 00:03:17,440
updateObject aqu y lo devolver para mi estado.

30
00:03:17,460 --> 00:03:22,790
Ahora, qu necesita cambiar en un estado en un caso de xito? En un caso de xito, quiero configurar el

31
00:03:22,920 --> 00:03:28,020
token y el ID de usuario y el error y la carga, por lo que todo.

32
00:03:28,440 --> 00:03:35,370
Entonces, en un caso de xito, establecer un token para decir token de ID de accin,

33
00:03:35,370 --> 00:03:38,620
espero obtener esta propiedad en mi ID

34
00:03:38,640 --> 00:03:42,680
de usuario de accin para ID de usuario de

35
00:03:42,680 --> 00:03:47,080
accin, tambin espero obtener esto, el error ser nulo y

36
00:03:47,100 --> 00:03:53,190
se cargar a falso porque Est hecho. Ahora tambin crear otra

37
00:03:53,200 --> 00:03:57,650
funcin, authFail, all tambin recibo estado

38
00:03:58,040 --> 00:04:06,550
y accin y aqu, devolver el estado updateObject y aqu establecer un

39
00:04:06,770 --> 00:04:14,630
error de error de accin que espero obtener y seguir cargando

40
00:04:14,630 --> 00:04:16,100
a falso, por supuesto.

41
00:04:16,100 --> 00:04:23,600
Ahora estas dos acciones, por supuesto, deben manejarse con casos, as que agreguemos un caso actionTypes. AUTH_SUCCESS, whoops, AUTH_SUCCESS, aqu quiero devolver

42
00:04:23,640 --> 00:04:33,620
el resultado de la funcin authSuccess que acabo de crear, pasar el estado y la accin

43
00:04:33,620 --> 00:04:39,890
del curso y caso actionTypes. AUTH_FAIL, aqu quiero devolver el resultado de

44
00:04:40,100 --> 00:04:43,660
mi funcin authFail donde tambin paso el estado

45
00:04:43,670 --> 00:04:46,080
y la accin, por lo que

46
00:04:46,190 --> 00:04:52,880
estas son dos funciones que acabo de crear. Con eso obtengo un buen auth reductor que

47
00:04:52,880 --> 00:04:55,080
debera poder hacer algo con

48
00:04:55,220 --> 00:04:59,470
mis datos, ahora por supuesto que quiero combinarlo con mis

49
00:04:59,540 --> 00:05:11,460
otros reductores, as que en mi ndice principal. js file, importar el auth reducer desde. / store reducrs auth, as y adalo para combinar

50
00:05:12,310 --> 00:05:14,790
reductores en el dominio de

51
00:05:14,830 --> 00:05:23,230
autenticacin, por lo tanto, en una propiedad llamada auth. Con eso agregamos a nuestro reductor de raz global, no obtendremos

52
00:05:23,650 --> 00:05:27,890
toda la informacin que queremos, identificador de identificacin, ID de usuario,

53
00:05:27,920 --> 00:05:33,180
extraigo todo eso de la accin, ahora mismo si tenemos un vistazo en nuestra

54
00:05:33,250 --> 00:05:40,030
accin aqu, Realmente no estoy transmitiendo esa informacin. Entonces, inspeccionemos la respuesta que recibimos para ver

55
00:05:40,030 --> 00:05:44,980
cmo extraemos los datos que queremos transmitir a authSuccess, y as sucesivamente.

56
00:05:44,980 --> 00:05:53,170
Regresemos a nuestra aplicacin y la recarguemos y obtengamos este error porque en el reductor de autenticacin olvid una cosa

57
00:05:53,180 --> 00:05:55,160
importante: el estado, por supuesto,

58
00:05:55,270 --> 00:06:01,020
debe establecerse en el estado inicial; de lo contrario, no est definido al principio.

59
00:06:01,200 --> 00:06:07,810
Ahora, con eso, est funcionando nuevamente e intentemos iniciar sesin, inicie sesin porque esta direccin de correo electrnico ya est

60
00:06:07,810 --> 00:06:09,340
tomada, all recibimos una respuesta

61
00:06:09,340 --> 00:06:16,660
y ahora aqu vemos que obtenemos la ID local que es la ID de usuario y nosotros obtener el token de identificacin,

62
00:06:16,660 --> 00:06:17,400
eso tambin

63
00:06:17,410 --> 00:06:18,980
es interesante para m.

64
00:06:19,360 --> 00:06:23,380
As que estas son dos cosas que guardar, no guardar el token de actualizacin,

65
00:06:23,470 --> 00:06:26,270
por lo que refrescar el token no ser posible aqu,

66
00:06:26,290 --> 00:06:32,020
esto es algo que tendras que hacer si quieres asegurarte de que los tokens no caduquen despus 1 hora, en

67
00:06:32,200 --> 00:06:36,450
mi aplicacin, la gente tendr que iniciar sesin de nuevo despus de una hora.

68
00:06:36,760 --> 00:06:42,110
Entonces, para guardar esos datos en identificador local e identificador de identificacin,

69
00:06:42,340 --> 00:06:51,010
lo obtengo en mi archivo de autenticacin en la carpeta de acciones, aqu donde publicamos nuestra solicitud de autenticacin

70
00:06:51,010 --> 00:06:53,870
y obtenemos una respuesta, en los

71
00:06:54,040 --> 00:07:02,380
datos de respuesta, tenemos el identificador de identificador y el campo ID local y necesito pasar esto a authSuccess

72
00:07:02,400 --> 00:07:07,640
porque authSuccess necesita pasarlo, pasando el token, as que espero obtener mi

73
00:07:07,660 --> 00:07:16,870
token y el ID de usuario aqu para poder pasar el token y el ID de usuario como accesorios que Luego

74
00:07:16,870 --> 00:07:19,860
trato de extraer en mi reductor.

75
00:07:19,960 --> 00:07:26,050
Ah trato de extraer el token, el token de identificacin y el ID de usuario, as que su token de

76
00:07:26,230 --> 00:07:34,650
identificacin cambia el nombre a ese en nuestro archivo de accin de autenticacin, debe ser una propiedad llamada token de identificacin y para el error se llama

77
00:07:34,690 --> 00:07:42,430
error, eso ya es lo que intento para extraer, as que funcionar. Con eso tenemos que volver al archivo de autenticacin aqu

78
00:07:42,550 --> 00:07:50,130
y espero obtener mi token y la identificacin de usuario en la funcin authSuccess, eso por supuesto significa que cuando

79
00:07:50,200 --> 00:07:57,330
despache esta funcin aqu, en el caso de xito, necesito pasarla. as que necesito pasar los datos de respuesta

80
00:07:57,400 --> 00:08:04,450
y luego se denomin token de ID y como segundo argumento, los datos de respuesta y la ID de

81
00:08:04,450 --> 00:08:11,260
usuario se almacenaron en una propiedad de ID local y siempre se puede verificar en el registro de

82
00:08:11,260 --> 00:08:11,750
la

83
00:08:11,800 --> 00:08:16,960
consola, identificador de ID y ID local. Con eso estoy guardando esos datos

84
00:08:17,320 --> 00:08:19,060
y ahora vamos a

85
00:08:19,070 --> 00:08:23,150
ver si esto funciona, enviemos estos datos una vez ms,

86
00:08:23,150 --> 00:08:30,780
cambie a iniciar sesin, vaya a reducir y presione enviar y en caso de xito si ahora inspeccionamos

87
00:08:31,050 --> 00:08:37,110
el estado, lo vemos en auth de hecho tenemos el token y tenemos el

88
00:08:37,110 --> 00:08:44,310
ID de usuario almacenado aqu, as que funcion todo. Con eso estamos almacenando el estado de autenticacin, lo que no estamos

89
00:08:44,310 --> 00:08:45,310
haciendo es que

90
00:08:45,320 --> 00:08:47,140
no mostremos un spinner mientras estamos autenticando.

91
00:08:47,400 --> 00:08:54,600
Agreguemos esto adems de la gestin de errores antes de continuar y utilizar ese token cuando intentemos acceder a

92
00:08:54,600 --> 00:08:58,230
recursos a los que de otro modo no podramos acceder.


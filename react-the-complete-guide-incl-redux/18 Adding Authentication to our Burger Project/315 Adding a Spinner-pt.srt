1
00:00:02,170 --> 00:00:06,130
Ento, vamos nos certificar de que podemos ver um spinner enquanto esperamos

2
00:00:06,130 --> 00:00:12,250
por uma resposta. Tambm vamos nos certificar de que, se digitarmos algo invlido, tambm receberemos um erro visual de

3
00:00:12,250 --> 00:00:13,420
erro aqui na pgina.

4
00:00:13,420 --> 00:00:16,080
Vamos comear com o controle giratrio e,

5
00:00:16,090 --> 00:00:20,250
para isso, vou para o meu recipiente de autenticao e

6
00:00:20,260 --> 00:00:22,350
no topo, importo meu componente

7
00:00:22,630 --> 00:00:26,000
giratrio, chama-se girador e o obtemos a partir

8
00:00:26,050 --> 00:00:28,730
do spinner giratrio da UI de componentes,

9
00:00:28,760 --> 00:00:33,600
podemos ver como esses componentes reutilizveis fazem muito sentido em reagir aqui.

10
00:00:33,610 --> 00:00:37,920
Agora quero exibir o controle giratrio enquanto estiver carregando e, para

11
00:00:37,930 --> 00:00:44,640
isso, preciso saber se estamos carregando e estamos armazenando essas informaes em nosso estado de autenticao, para

12
00:00:44,650 --> 00:00:49,040
isso preciso obter um pedao desse estado em my auth container

13
00:00:49,240 --> 00:00:52,840
e isso, claro,  um caso para o disp

14
00:00:52,970 --> 00:01:00,750
de mapeamento de desculpas, mapStateToProps, l ns pegamos o estado e agora podemos mapear uma fatia dele para nossos adereos locais.

15
00:01:01,320 --> 00:01:04,080
Ento eu vou retornar um objeto onde eu fao esse

16
00:01:04,080 --> 00:01:12,290
mapeamento e eu quero pegar o estado de carregamento por enquanto, ento vou mapear estado. Agora no estado, temos que acessar a auth pois

17
00:01:12,520 --> 00:01:17,520
 isso que leva ao redutor de autenticao no final devido

18
00:01:18,190 --> 00:01:27,620
aos redutores combinados, ento temos que acessar a state auth e l agora, a propriedade loading que configuramos em nosso estado

19
00:01:27,640 --> 00:01:32,870
de redutores de autenticao, esta um aqui. Com isso, disponibilizamos isso aqui,

20
00:01:32,900 --> 00:01:39,720
precisamos passar o mapStateToProps para nossa funo connect, e agora, aqui no

21
00:01:39,770 --> 00:01:44,250
nosso mtodo de renderizao, podemos renderizar um spinner.

22
00:01:44,270 --> 00:01:48,920
Ento, o que farei  renderizar o formulrio ou se estiver carregando, o girador.

23
00:01:49,190 --> 00:01:58,790
Ento, eu vou verificar depois que o formulrio foi criado, se este carregamento de adereos for verdadeiro, porque se for, a forma

24
00:01:59,210 --> 00:02:07,780
no ser mais uma const, mas uma let, uma varivel ento a forma ser igual  spinner, assim, para mostrar

25
00:02:07,790 --> 00:02:11,470
um spinner se estivermos carregando, isso deve ser tudo.

26
00:02:11,680 --> 00:02:16,420
Com isso, se inserirmos alguns dados aqui, no importa se so vlidos

27
00:02:16,640 --> 00:02:22,310
ou no, se eu enviar isso, veremos um girador rapidamente porque  muito rpido.

28
00:02:22,310 --> 00:02:25,410
Agora tambm vamos nos certificar de que veremos

29
00:02:25,490 --> 00:02:32,030
mensagens de erro se enviarmos dados incorretos e, para ver isso,  claro que preciso aproveitar o fato

30
00:02:32,030 --> 00:02:35,410
de que eu armazeno possveis erros em minha loja.

31
00:02:35,810 --> 00:02:42,570
Ento, primeiro de tudo eu preciso para obter esse erro, adicionando outro mapeamento no recipiente auth,

32
00:02:43,040 --> 00:02:50,750
erro e que deve ser estado. auth. erro porque eu armazeno qualquer erro no meu estado

33
00:02:50,750 --> 00:02:55,350
aqui nesta propriedade de erro e eu fao isso na ao de falha de autenticao.

34
00:02:55,580 --> 00:03:03,500
Com isso, agora preciso voltar para o continer de autenticao e o Firebase nos fornece uma boa mensagem de

35
00:03:03,500 --> 00:03:06,860
erro, seu back-end tambm pode fazer isso ou

36
00:03:06,890 --> 00:03:13,460
voc cria o seu prprio, vou usar o do Firebase e j que temos esse mensagem,

37
00:03:13,460 --> 00:03:22,050
o que posso fazer  exibir uma mensagem de erro. Ento eu posso criar um novo errorMessage const que por padro

38
00:03:22,050 --> 00:03:27,050
pode ser nulo e, portanto, deve ser um let tambm, mas ento eu

39
00:03:27,140 --> 00:03:37,620
vou adicionar uma declarao if aqui, se isso. adereos. erro, se tivermos que definir, se no for nulo, a mensagem de erro

40
00:03:37,650 --> 00:03:46,850
ser realmente algum jsx, um pargrafo digamos onde eu simplesmente imprimo isso. adereos. erro e l, desde firebase me

41
00:03:46,920 --> 00:03:50,950
d isso, haver uma propriedade de mensagem.

42
00:03:50,950 --> 00:03:56,670
Novamente, essa propriedade de mensagem s est disponvel porque estou usando o erro, j que ele

43
00:03:56,680 --> 00:04:01,630
 um objeto javascript que tem uma propriedade de mensagem. Isso pode no

44
00:04:01,650 --> 00:04:06,430
ser o caso de seu prprio back-end, claro, ajuste isso para suas necessidades.

45
00:04:07,230 --> 00:04:15,530
Eu quero a sada deste elemento de mensagem de erro ento, talvez acima do meu formulrio aqui eu vou sada mensagem de erro e  claro

46
00:04:15,600 --> 00:04:19,210
que poderamos dar isso mais estilo, torn-lo vermelho, o que quisermos.

47
00:04:19,230 --> 00:04:24,440
Agora, antes de vermos algo, temos que garantir que realmente armazenamos esse erro,

48
00:04:24,660 --> 00:04:33,180
ento tenho que ir ao meu arquivo de autenticao na pasta actions e podemos acessar a mensagem de erro, o objeto de

49
00:04:33,180 --> 00:04:40,590
erro que recebemos do firebase nesse erro objeto aqui, acessando a resposta original e que  devido a axios,

50
00:04:40,620 --> 00:04:46,440
estamos usando axios aqui e ele simplesmente envolve a resposta neste objeto de erro e

51
00:04:46,860 --> 00:04:48,750
l, ainda teremos dados e

52
00:04:48,780 --> 00:04:51,230
l, teremos esse objeto de erro.

53
00:04:51,230 --> 00:04:56,250
Voc sempre pode confirmar isso pela resposta de erro de log do console e ver que

54
00:04:56,250 --> 00:05:00,740
obtm os mesmos campos que em uma resposta normal, apenas com um cdigo de erro.

55
00:05:00,960 --> 00:05:07,750
Com isso, se salvarmos tudo e enviarmos um formulrio vazio, receberemos um e-mail invlido, se eu usar

56
00:05:07,830 --> 00:05:14,610
esse e-mail que j temos em uso e no estiver fazendo login, mas me inscrevendo, recebemos um

57
00:05:14,610 --> 00:05:15,690
e-mail .

58
00:05:15,690 --> 00:05:20,400
Agora, isso claramente no  uma boa mensagem de erro, seria melhor obter um texto legal que

59
00:05:20,400 --> 00:05:23,760
possamos ler facilmente, mas acho que ele diz o que est errado.

60
00:05:23,910 --> 00:05:28,670
 claro que voc pode mapear esses cdigos para suas prprias mensagens de erro,

61
00:05:28,680 --> 00:05:34,050
 algo que no farei aqui por agora, mas definitivamente algo que voc pode ter

62
00:05:34,420 --> 00:05:39,300
em mente como uma melhoria, mapeie isso para seu endereo de e-mail favorito pessoal.

63
00:05:39,300 --> 00:05:44,760
Voc sempre pode descobrir quais possveis erros voc pode obter observando a documentao

64
00:05:44,820 --> 00:05:52,590
da API do firebase auth rest aqui e ali, voc v cdigos de erro comuns, como e-mail no

65
00:05:52,590 --> 00:05:55,170
encontrado, senha invlida ou para se

66
00:05:55,170 --> 00:06:01,230
inscrever, seria e-mail existe, muitas tentativas ou e-mail invlido como voc acabou de ver.


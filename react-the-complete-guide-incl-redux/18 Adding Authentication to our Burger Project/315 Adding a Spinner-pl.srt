1
00:00:02,170 --> 00:00:06,130
Upewnijmy si, e widzimy spinnera, podczas gdy czekamy na odpowied,

2
00:00:06,130 --> 00:00:12,250
ale upewnijmy si, e jeli wprowadzimy co niewanego, otrzymamy tu take informacj zwrotn o bdach

3
00:00:12,250 --> 00:00:13,420
na stronie.

4
00:00:13,420 --> 00:00:16,080
Zacznijmy od pokrta, a do tego

5
00:00:16,090 --> 00:00:20,250
przejd do mojego auth-kontenera i na samym jego szczycie

6
00:00:20,260 --> 00:00:22,350
zaimportuj mj komponent spinner, nazywa

7
00:00:22,630 --> 00:00:26,000
si to spinner i otrzymamy go z

8
00:00:26,050 --> 00:00:28,730
komponentowego spinnera UI, moemy naprawd zobaczy

9
00:00:28,760 --> 00:00:33,600
jak te elementy wielokrotnego uytku maj duo sensu w reagowaniu tutaj.

10
00:00:33,610 --> 00:00:37,920
Teraz chc wywietla spinner tak dugo, jak dugo adujemy

11
00:00:37,930 --> 00:00:44,640
i do tego potrzebuj wiedzie, czy adujemy i przechowujemy te informacje w naszym stanie autorskim,

12
00:00:44,650 --> 00:00:49,040
poniewa potrzebuj uzyska kawaek tego stanu w mj auth-kontener i

13
00:00:49,240 --> 00:00:52,840
to oczywicie jest sprawa, e ekspedycja z map

14
00:00:52,970 --> 00:01:00,750
const przepraszam, mapStateToProps, tam otrzymujemy stan i moemy teraz zamapowa kawaek tego na nasze lokalne rekwizyty.

15
00:01:01,320 --> 00:01:04,080
Tak wic zwrc obiekt, w ktrym wykonuj to

16
00:01:04,080 --> 00:01:12,290
mapowanie i chc na razie uzyska stan adowania, wic bd mapowa stan. Teraz na stanie, musimy uzyska dostp do auth, poniewa

17
00:01:12,520 --> 00:01:17,520
jest to, co prowadzi do auth reduktora w kocu ze

18
00:01:18,190 --> 00:01:27,620
wzgldu na poczone reduktory, wic musimy uzyska dostp do stanu auth i tam teraz, waciwo adowania ustawilimy w naszym stanie

19
00:01:27,640 --> 00:01:32,870
reduktorw auth, to jeden tutaj. Dziki temu mamy to

20
00:01:32,900 --> 00:01:39,720
dostpne tutaj, musimy przekaza mapStateToProps do naszej funkcji connect, a teraz

21
00:01:39,770 --> 00:01:44,250
tutaj, w naszej metodzie renderowania, moemy renderowa spinner.

22
00:01:44,270 --> 00:01:48,920
Wic to, co zrobi, to wyrenderuj albo formularz, albo adujemy, spinner.

23
00:01:49,190 --> 00:01:58,790
Sprawdz wic, czy formularz zosta utworzony, jeli to adowanie jest prawd, poniewa jeli tak, to forma nie bdzie

24
00:01:59,210 --> 00:02:07,780
ju sta, ale let, zmienna, a wtedy forma bdzie rwna spinnerowi, tak jak to, aby pokaza

25
00:02:07,790 --> 00:02:11,470
spinner, jeli adujemy, to powinno by wszystko.

26
00:02:11,680 --> 00:02:16,420
Jeli wprowadzimy tutaj pewne dane, bez wzgldu na to, czy s

27
00:02:16,640 --> 00:02:22,310
one wane, czy te je przedstawi, zobaczymy krtko spinner, poniewa jest tak szybki.

28
00:02:22,310 --> 00:02:25,410
Teraz upewnijmy si, e widzimy komunikaty o

29
00:02:25,490 --> 00:02:32,030
bdach, jeli przekaemy bdne dane i aby to zobaczy, musz oczywicie skorzysta z faktu,

30
00:02:32,030 --> 00:02:35,410
e przechowuj potencjalne bdy w moim sklepie.

31
00:02:35,810 --> 00:02:42,570
Przede wszystkim musz uzyska ten bd, dodajc kolejne mapowanie w kontenerze auth, bd

32
00:02:43,040 --> 00:02:50,750
i to powinno by stanem. auth. bd, poniewa przechowuj wszelkie bdy w moim

33
00:02:50,750 --> 00:02:55,350
stanie tutaj w tej waciwoci bdu i robi to w akcji autoryzacji.

34
00:02:55,580 --> 00:03:03,500
Musz teraz powrci do kontenera auth, a baza ogniowa daje nam miy komunikat o bdzie, twj

35
00:03:03,500 --> 00:03:06,860
backend te moe to zrobi lub sam

36
00:03:06,890 --> 00:03:13,460
przygotujesz swj, zamierzam wzi ten z bazy firebase i poniewa mamy to wiadomo,

37
00:03:13,460 --> 00:03:22,050
co mog zrobi, to mog wywietli komunikat o bdzie. Tak wic mog utworzy nowy komunikat bdu const, ktry

38
00:03:22,050 --> 00:03:27,050
domylnie moe mie warto null, a zatem powinien by rwnie dozwolony,

39
00:03:27,140 --> 00:03:37,620
ale wtedy dodam instrukcj if tutaj, jeli to. rekwizyty. bd, jeli musimy ustawi, jeli nie jest null, to komunikat o bdzie

40
00:03:37,650 --> 00:03:46,850
bdzie faktycznie jakim jsx, akapitem powiedzmy, gdzie po prostu wypisz to. rekwizyty. Bd i tam, poniewa baza

41
00:03:46,920 --> 00:03:50,950
ogniowa daje mi to, bdzie waciwo wiadomoci.

42
00:03:50,950 --> 00:03:56,670
Znowu ta waciwo komunikatu jest dostpna tylko dlatego, e uywam bdu, poniewa wraca z

43
00:03:56,680 --> 00:04:01,630
bazy Firebase i jest to obiekt javascript, ktry ma waciwo message, moe

44
00:04:01,650 --> 00:04:06,430
nie by tak w przypadku twojego backendu, dostosuj to do Twoje potrzeby.

45
00:04:07,230 --> 00:04:15,530
Chc wydrukowa ten element komunikatu o bdzie, moe nad moj form tutaj wyjd komunikat o bdzie i oczywicie moemy nada

46
00:04:15,600 --> 00:04:19,210
mu wicej stylu, sprawi, by by czerwony, czegokolwiek chcemy.

47
00:04:19,230 --> 00:04:24,440
Zanim jednak co zobaczymy, musimy upewni si, e naprawd przechowujemy ten bd,

48
00:04:24,660 --> 00:04:33,180
wic musz przej do mojego pliku auth w folderze actions i moemy uzyska dostp do komunikatu o bdzie, obiektu bdu,

49
00:04:33,180 --> 00:04:40,590
ktry otrzymujemy z Firebase na ten bd tutaj, uzyskujc dostp do pierwotnej odpowiedzi, a to z powodu aksjomatw,

50
00:04:40,620 --> 00:04:46,440
uywamy tu axios i po prostu opakowuje odpowied w tym obiekcie bdu i tam,

51
00:04:46,860 --> 00:04:48,750
wci bdziemy mieli dane i

52
00:04:48,780 --> 00:04:51,230
tam, bdziemy mieli ten obiekt bdu.

53
00:04:51,230 --> 00:04:56,250
Zawsze moesz to potwierdzi przez reakcj na bd rejestracji konsoli, a zobaczysz, e

54
00:04:56,250 --> 00:05:00,740
otrzymujesz te same pola co przy normalnej odpowiedzi, tylko z kodem bdu.

55
00:05:00,960 --> 00:05:07,750
Dziki temu, jeli wszystko zapiszemy, a my wylemy pusty formularz, otrzymamy nieprawidow wiadomo e-mail, jeli

56
00:05:07,830 --> 00:05:14,610
teraz uywam tego e-maila, ktry ju mamy w uyciu i nie loguj si, ale rejestracja,

57
00:05:14,610 --> 00:05:15,690
otrzymujemy e-mail .

58
00:05:15,690 --> 00:05:20,400
To wyranie nie jest adny komunikat o bdzie, byoby adniej, aby uzyska adny tekst, ktry

59
00:05:20,400 --> 00:05:23,760
moemy atwo przeczyta, myl, e mwi, co jest nie tak.

60
00:05:23,910 --> 00:05:28,670
Oczywicie mona zmapowa te kody do wasnych komunikatw o bdach, jest

61
00:05:28,680 --> 00:05:34,050
to co, czego nie zrobi na razie, ale na pewno co, o czym

62
00:05:34,420 --> 00:05:39,300
mona pamita jako usprawnienie, zamapuj to na swj ulubiony adres e-mail.

63
00:05:39,300 --> 00:05:44,760
Zawsze moesz dowiedzie si, jakie potencjalne bdy mona uzyska, przegldajc dokumentacj interfejsu

64
00:05:44,820 --> 00:05:52,590
API autoryzacji firebase tutaj i tam, widzisz typowe kody bdw, takie jak nie znaleziono e-maila, nieprawidowe haso

65
00:05:52,590 --> 00:05:55,170
lub rejestracj, ktr prbowalimy, e moe

66
00:05:55,170 --> 00:06:01,230
to by e-mail, zbyt wiele prb lub nieprawidowy adres e-mail, jak wanie widziae.


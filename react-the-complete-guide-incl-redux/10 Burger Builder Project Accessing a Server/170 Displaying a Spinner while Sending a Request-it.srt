1
00:00:02,150 --> 00:00:05,940
Quindi nell'ultima lezione ci siamo assicurati di poter inviare una richiesta POST.

2
00:00:05,980 --> 00:00:11,860
Ora in una tipica applicazione vogliamo mostrare qualcosa all'utente una volta che la richiesta  in arrivo.

3
00:00:11,900 --> 00:00:13,170
Ora dovr aggiungere.

4
00:00:13,180 --> 00:00:16,790
Firebase  davvero molto veloce.

5
00:00:17,000 --> 00:00:23,030
Quindi probabilmente non avremo nemmeno la possibilit di vedere una schermata di caricamento o qualcosa che vuoi

6
00:00:23,030 --> 00:00:25,640
mostrare all'utente se la richiesta  in arrivo.

7
00:00:25,640 --> 00:00:30,890
Tuttavia  una buona pratica mostrare qualcosa di simile perch nel caso avessimo un po 'di latenza o forse

8
00:00:30,890 --> 00:00:32,460
la rete degli utenti fosse lenta.

9
00:00:32,570 --> 00:00:36,230
Sicuramente vuoi mostrare all'utente hey sta succedendo qualcosa.

10
00:00:36,260 --> 00:00:37,750
Quindi cosa vogliamo mostrare.

11
00:00:37,850 --> 00:00:40,840
Bene, voglio mostrare uno spinner all'interno di questo modem.

12
00:00:40,850 --> 00:00:47,030
Quindi, invece del riepilogo dell'ordine, voglio mostrare uno spinner in modo che l'utente possa vedere che qualcosa

13
00:00:47,030 --> 00:00:47,940
sta accadendo qui.

14
00:00:48,050 --> 00:00:54,660
E una volta che hai finito, la Malda dovrebbe chiudersi e quindi lo splitter ovviamente sparir.

15
00:00:55,010 --> 00:00:56,740
Quindi, come lo facciamo?

16
00:00:56,780 --> 00:01:01,600
Prima di tutto abbiamo bisogno di un componente Spener che sia chiaramente un elemento dell'interfaccia utente.

17
00:01:01,610 --> 00:01:08,180
Quindi qui aggiunger una cartella spinner e poi l come Baynard J come file.

18
00:01:08,180 --> 00:01:16,570
Ora lo spinner pu essere semplicemente una semplice componente funzionale in cui restituir un accento js come sempre.

19
00:01:16,590 --> 00:01:24,410
Quindi import re-act da reagire ed esporta la funzione spinner nel tuo culo al file default, naturalmente.

20
00:01:24,410 --> 00:01:26,960
Ora per creare un SEUS come uno spinner.

21
00:01:26,960 --> 00:01:31,120
Possiamo semplicemente approfittare di alcune risorse che possiamo trovare su internet.

22
00:01:31,310 --> 00:01:37,940
Se cerchi C-s come spinner, troverai qui quel fantastico progetto, il primo risultato di ricerca

23
00:01:37,940 --> 00:01:44,930
che puoi vedere nel video, una pagina con un sacco di C-s come lo spinner e

24
00:01:44,930 --> 00:01:47,620
il codice che puoi semplicemente usare.

25
00:01:47,640 --> 00:01:52,190
Puoi anche regolarli qui selezionando un colore di sfondo.

26
00:01:52,190 --> 00:02:01,360
E qui inserir un cappotto bianco per lo sfondo e poi un colore frontale di questo Nye in

27
00:02:01,530 --> 00:02:05,770
modo appropriato o con quello puoi scegliere qualsiasi spinner.

28
00:02:05,920 --> 00:02:12,210
Sii quello che stai facendo per quello che ti piace e poi vedrai che questo  il pi freddo responsabile di

29
00:02:12,210 --> 00:02:13,310
esso come uno spinner.

30
00:02:13,320 --> 00:02:15,540
Ora ho intenzione di prendere tutto quel codice.

31
00:02:15,730 --> 00:02:21,180
Tutto il codice HTML di CDH  veramente semplice e pu essere utilizzato per afferrare tutto quel codice

32
00:02:21,180 --> 00:02:23,190
e quindi tornare all'applicazione di re-act l.

33
00:02:23,190 --> 00:02:26,300
Aggiunger un file SS di spinner e incolleremo il codice.

34
00:02:26,310 --> 00:02:27,630
Ho appena copiato.

35
00:02:27,930 --> 00:02:34,610
No, quello che far  rinominare rapidamente loader con caricatore con una L maiuscola.

36
00:02:34,710 --> 00:02:40,860
Solo per essere in linea con la caducit avara che sto usando in questo progetto e poi

37
00:02:40,860 --> 00:02:49,650
ho intenzione di prendere quella HDMI che la uccider qui sulla trottola e la user nella mia componente spinner come X e la classe

38
00:02:49,710 --> 00:02:51,200
ovviamente deve essere adeguato.

39
00:02:51,210 --> 00:02:56,680
 un nome di classe e ho bisogno di ordinare le classi da Mei's C come segue.

40
00:02:56,680 --> 00:03:03,870
maiuscola e che in realt  tutto il caricamento in mezzo come un fallback nel caso in cui il CSSA non viene visualizzato.

41
00:03:03,870 --> 00:03:10,170
Lo sto importando da spitters C S S e poi da quel nome di classe uguale a classi avvio loader

42
00:03:10,170 --> 00:03:10,970
con una L

43
00:03:11,040 --> 00:03:12,410
Quindi questo sar mostrato.

44
00:03:12,600 --> 00:03:15,370
Questo in realt  tutto il codice di cui ho bisogno per uno spinner.

45
00:03:15,390 --> 00:03:19,880
Ora ho solo bisogno di una logica per mostrarlo all'interno del modale mentre stiamo caricando.

46
00:03:19,920 --> 00:03:26,290
Quindi, essenzialmente, voglio condizionalmente rendere il riepilogo dell'ordine o il mio filatore.

47
00:03:26,460 --> 00:03:30,420
Ora ho bisogno di un nuovo stato nel mio costruttore di Bergere.

48
00:03:30,420 --> 00:03:37,310
Qui ci sono otto in uno stato che chiamer il caricamento e che  inizialmente falso quando  vero.

49
00:03:37,320 --> 00:03:39,690
Voglio mostrare lo splitter quando  falso.

50
00:03:39,720 --> 00:03:42,800
Voglio mostrare il riepilogo dell'ordine in questo componente.

51
00:03:43,290 --> 00:03:44,940
Quindi nel metodo di rendering.

52
00:03:44,970 --> 00:03:53,650
Ora aggiungo un segno di spunta dove dico se questo stato carica, poi voglio mostrare lo splitter e prima di tutto

53
00:03:53,710 --> 00:04:01,020
imposter l'alternativa che  il mio riepilogo dell'ordine un anno che dovrebbe essere semplicemente quell'elemento qui che ordina

54
00:04:01,020 --> 00:04:02,490
l'elemento di riepilogo.

55
00:04:02,490 --> 00:04:04,310
Abbiamo annidato nel modale.

56
00:04:04,650 --> 00:04:12,210
qui sopra che ho creato con la parola chiave let e la sovrascrivo nel caso in cui dovessimo caricare lo stato.

57
00:04:12,210 --> 00:04:14,570
Lo memorizzer nella variabile di riepilogo dell'ordine

58
00:04:14,640 --> 00:04:19,350
Quindi qui voglio utilizzare il nuovo componente Spener appena creato.

59
00:04:19,380 --> 00:04:25,950
Quindi ordiniamo uno spinner quindi lo aggiunger qui import Spener da.

60
00:04:26,130 --> 00:04:31,710
E ora dobbiamo andare alla cartella dei componenti, naturalmente, alla cartella dell'interfaccia utente e l

61
00:04:31,710 --> 00:04:39,570
alla cartella spinner e implorare la caduta del filatore da l e ora possiamo afferrare quella spinner e usarla l nel

62
00:04:39,570 --> 00:04:40,850
nostro metodo di rendering.

63
00:04:41,070 --> 00:04:48,180
Qui ora voglio impostare il riepilogo dell'ordine dovrebbe essere il mio filatore e questo  semplicemente un tag a chiusura automatica.

64
00:04:48,600 --> 00:04:53,250
Con quello che possiamo salvare lo fa ora dovremmo produrre l'anno di riepilogo dell'ordine.

65
00:04:53,250 --> 00:04:56,240
Questa variabile che abbiamo appena creato tra la tassa modale.

66
00:04:56,250 --> 00:05:01,320
Quindi ora o lo mostriamo meglio o mostriamo il riepilogo dell'ordine.

67
00:05:01,590 --> 00:05:07,370
Quindi salviamo questo e assicuriamoci che ora sia lo stato di caricamento che stiamo controllando qui.

68
00:05:07,380 --> 00:05:13,820
Ovviamente vogliamo cambiarlo qui quando stiamo effettivamente continuando con l'acquisto.

69
00:05:13,980 --> 00:05:15,420
C' proprio all'inizio.

70
00:05:15,450 --> 00:05:22,140
Voglio chiamare questo stato impostato e detto caricamento vero ovviamente perch ora stiamo caricando la richiesta sta

71
00:05:22,200 --> 00:05:26,830
per essere inviata una volta che la risposta  l per.

72
00:05:26,850 --> 00:05:34,140
e voglio interrompere il caricamento indipendentemente dalla risposta, perch la richiesta  stata eseguita anche se non  riuscita.

73
00:05:34,140 --> 00:05:38,800
Qui, dove registro, non voglio pi loggarlo ma voglio interrompere il caricamento

74
00:05:38,850 --> 00:05:45,330
Quindi qui chiamer questo stato impostato e ricomincer a caricare il falso.

75
00:05:45,390 --> 00:05:48,920
Certo che torniamo all'Ivor.

76
00:05:49,080 --> 00:05:51,620
Ben impaginato lo stato.

77
00:05:51,990 --> 00:05:58,380
Ovviamente voglio anche dire che caricando due file se abbiamo un errore o perch anche se si  verificato un errore,

78
00:05:58,650 --> 00:06:02,830
vogliamo interrompere il caricamento. Non vogliamo pi mostrare lo spinner perch il nostro.

79
00:06:02,860 --> 00:06:06,390
Saresti bloccato in questo caso e l'utente lo considererebbe comunque.

80
00:06:06,420 --> 00:06:07,950
Ben carico.

81
00:06:08,310 --> 00:06:11,500
Certo che voglio anche chiudere il motoscafo.

82
00:06:11,820 --> 00:06:18,900
Bene, questo pu essere fatto facilmente perch il modem viene mostrato solo se la propriet di acquisto dello stato qui 

83
00:06:18,900 --> 00:06:20,000
impostata su true.

84
00:06:20,250 --> 00:06:23,550
Quindi dovremmo semplicemente impostare chasing to false qui.

85
00:06:23,730 --> 00:06:31,190
Quindi, in entrambi i casi, imposter anche il falso in modo da chiudere il modale.

86
00:06:31,350 --> 00:06:31,930
Quindi se questo.

87
00:06:31,940 --> 00:06:32,820
Andiamo fuori.

88
00:06:32,850 --> 00:06:38,910
Se torniamo al nostro hamburger e creiamo un hamburger, faccio clic per ordinare ora e continuare.

89
00:06:39,710 --> 00:06:42,980
In realt non abbiamo visto lo spinner.

90
00:06:43,170 --> 00:06:46,780
Ora questo ha senso a causa del modo in cui abbiamo configurato la nostra app.

91
00:06:46,790 --> 00:06:52,940
Ma sai perch non abbiamo visto che lo spinner pu essere difficile da individuare, ma ti dar la possibilit

92
00:06:52,940 --> 00:06:57,850
di pubblicare un video e trovare il problema da solo perch ti mostrer perch non funziona.

93
00:06:59,590 --> 00:07:01,750
Hai scoperto cosa c' che non va.

94
00:07:02,110 --> 00:07:08,870
Ora non posso dirti che stiamo impostando correttamente il caricamento e cos via e il sommario degli ordini  tutto

95
00:07:08,880 --> 00:07:09,560
da girare.

96
00:07:09,760 --> 00:07:15,730
Ma in qualche modo il nostro motore non si aggiorna e non mostra questo quando abbiamo detto questo.

97
00:07:15,740 --> 00:07:17,880
Ora c' una buona ragione per quello.

98
00:07:18,040 --> 00:07:26,270
Considera che il nostro codice modale che usiamo dovrebbe essere saltato in aria quell'anno e fondamentalmente si aggiorna solo in caso

99
00:07:26,440 --> 00:07:34,090
di decomposizione se lo stato dello spettacolo ha cambiato le modifiche qui, tuttavia i bambini del componente cambiano semplicemente ai

100
00:07:34,090 --> 00:07:35,380
figli del prop.

101
00:07:35,380 --> 00:07:39,910
Stiamo passando un nuovo figlio a ripassare lo spinner al posto del riepilogo dell'ordine.

102
00:07:40,240 --> 00:07:47,380
Questo non innesca un aggiornamento qui, quindi dobbiamo semplicemente mettere a punto il nostro metodo di composizione

103
00:07:47,470 --> 00:07:49,330
e aggiornamento nel componente modale.

104
00:07:49,510 --> 00:07:57,430
solo per una frazione di secondo, ma se fai clic su Continua, vedi quel caricatore e vedi che lo styling era un po 'rotto.

105
00:07:57,430 --> 00:08:04,120
E dobbiamo controllare se i bambini del prossimo propino sono in realt diversi dai bambini di questo prop, in

106
00:08:04,120 --> 00:08:09,250
modo che si aggiorni se riceve nuovi bambini con quel cambiamento sul posto una volta

107
00:08:09,250 --> 00:08:15,960
salvato, se ora torni alla tua applicazione e costruisci un hamburger no per osservare da vicino perch st andando

108
00:08:15,950 --> 00:08:16,690
a statore

109
00:08:16,690 --> 00:08:18,140
Cerchiamo rapidamente questo.

110
00:08:18,240 --> 00:08:26,120
Dobbiamo andare nello spinner e l il colore di sfondo su quel caricatore prima che la regola sia bianca.

111
00:08:26,140 --> 00:08:33,030
Quindi f f il caricatore del vero colore dovrebbe essere bianco e con pap.

112
00:08:33,030 --> 00:08:37,890
Ora se salviamo questo e creiamo un altro hamburger e ordine dat.

113
00:08:37,980 --> 00:08:39,500
Ora abbiamo uno spinner di bell'aspetto.

114
00:08:39,590 --> 00:08:43,020
Ancora una volta non lo vediamo cos a lungo perch Firebase  cos veloce.

115
00:08:43,080 --> 00:08:45,220
Sentiti libero di commentarlo

116
00:08:45,250 --> 00:08:49,130
Invia richiesta qui per vederlo un po 'pi a lungo.

117
00:08:49,150 --> 00:08:50,160
Lo far.

118
00:08:50,160 --> 00:08:54,810
Quindi ora non inviamo una richiesta e non torneremo mai dallo stato di caricamento.

119
00:08:54,810 --> 00:08:57,420
Ora puoi vedere lo spinner qui.

120
00:08:57,420 --> 00:09:01,930
Quindi ora otteniamo uno spinner che stiamo mostrando mentre qualcosa sta accadendo.

121
00:09:02,110 --> 00:09:07,800
Ovviamente non succede nulla perch ho commentato, ma ora abbiamo risolto questo problema.

122
00:09:07,810 --> 00:09:11,680
Ora gestiamo anche il caso morto.

123
00:09:11,730 --> 00:09:17,910
La nostra richiesta HTP fallisce perch vogliamo informare l'utente di un simile fallimento.


1
00:00:02,290 --> 00:00:09,130
Obsuga bdw lokalnie w komponentach ma sens, poniewa prawdopodobnie chcesz robi rne rzeczy z bdami

2
00:00:09,130 --> 00:00:12,900
w zalenoci od tego, w ktrym komponencie jeste.

3
00:00:12,910 --> 00:00:17,410
Moe chcesz pokaza, e co poszo nie tak i na innym komponencie chcesz

4
00:00:17,410 --> 00:00:17,980
pokaza co

5
00:00:18,070 --> 00:00:22,650
innego, ale czasami w niektrych miejscach moesz chcie wykona jaki kod globalnie.

6
00:00:22,660 --> 00:00:31,480
Niezalenie od tego, ktre z da HTTP wysyasz, z ktrego komponentu chcesz co zrobi, gdy

7
00:00:31,480 --> 00:00:35,950
zostanie wysane i kiedy odpowied zostanie zwrcona.

8
00:00:36,370 --> 00:00:41,190
Moesz to zrobi za pomoc aksjomatw za pomoc tak zwanych przechwytujcych,

9
00:00:41,200 --> 00:00:47,470
to s funkcje, ktre moesz zdefiniowa globalnie, ktre bd wykonywane dla kadego dania, pozostawiajc aplikacj

10
00:00:47,650 --> 00:00:50,370
i kad odpowied wracajc do niej.

11
00:00:50,380 --> 00:00:56,830
Jest to szczeglnie uyteczne na przykad do ustawiania niektrych wsplnych nagwkw, takich jak nagwek autoryzacji

12
00:00:57,220 --> 00:00:58,980
lub odpowiedzi, jeli chcesz

13
00:00:58,990 --> 00:01:06,670
rejestrowa odpowiedzi lub chcesz obsugiwa bdy na caym wiecie. Poka ci, jak dodawa interceptory w

14
00:01:06,670 --> 00:01:08,400
tym wykadzie.

15
00:01:08,410 --> 00:01:14,200
Przejdmy do indeksu. Plik js, poniewa jest to najbardziej globalny plik w

16
00:01:14,260 --> 00:01:19,740
naszej aplikacji do reagowania, jest to plik, w ktrym faktycznie uruchamiamy nasz aplikacj reagowania, montujc j w domenie.

17
00:01:19,780 --> 00:01:28,000
Tak wic teraz, teraz chc rwnie zaimportowa axios z pakietu axios, a wszystkie te importowane

18
00:01:28,000 --> 00:01:31,060
aksje wszystkie maj t sam konfiguracj.

19
00:01:31,120 --> 00:01:37,600
Dlatego nie moemy rwnie uywa tu osi, a aksios to specjalny obiekt przechwytywania, a nastpnie bdzie on

20
00:01:37,660 --> 00:01:43,300
nastpnie udostpniany nie tylko w tym pliku, ale we wszystkich plikach w projekcie, dziki czemu

21
00:01:43,300 --> 00:01:47,130
wpynie na wszystkie dania wysyane z dowolnego miejsca w aplikacji. .

22
00:01:47,560 --> 00:01:55,790
Tam moemy uzyska dostp do obiektu dania, a teraz po prostu dodaj uycie do zarejestrowania

23
00:01:55,790 --> 00:02:03,540
nowego przechwytywacza, ktry przechwytuje funkcj jako wejcie, ktre otrzymuje konfiguracj lub danie, ktre mona powiedzie.

24
00:02:03,670 --> 00:02:10,330
Teraz po prostu zapiszmy t prob do konsoli, abymy mogli zobaczy, co jest w rodku.

25
00:02:10,330 --> 00:02:15,770
Nazywam to prob, ale gwnie chodzi o to, aby poprosi o konfiguracj, o ktrej naley pamita.

26
00:02:15,820 --> 00:02:17,340
Teraz zapiszmy to i

27
00:02:17,740 --> 00:02:21,020
jeli wrcimy do aplikacji, od razu zobaczymy co w dzienniku.

28
00:02:21,090 --> 00:02:28,450
To jest danie, ktre zostao wysane, przynajmniej konfiguracja dania. Zobaczysz nagwki, ktre s dodane i tak, to

29
00:02:28,780 --> 00:02:29,280
jest

30
00:02:29,350 --> 00:02:29,760
nasza

31
00:02:29,800 --> 00:02:31,580
proba, to jest to,

32
00:02:31,660 --> 00:02:35,070
co dostalimy tutaj, kiedy dostalimy posty.

33
00:02:35,320 --> 00:02:41,300
Teraz co poszo nie tak, poniewa obecnie blokujemy dania.

34
00:02:41,590 --> 00:02:50,520
W tej funkcji przechwytywania musisz zawsze zwraca danie lub konfiguracj dania, w przeciwnym

35
00:02:50,830 --> 00:02:53,260
razie blokujesz danie.

36
00:02:53,260 --> 00:02:58,360
Oczywicie moesz take edytowa konfiguracj dania, zanim j zwrcisz, to jest

37
00:02:58,360 --> 00:03:00,230
idea kryjca si za

38
00:03:00,310 --> 00:03:03,260
przechwytujcym, moesz doda nagwki, robi takie rzeczy.

39
00:03:03,610 --> 00:03:09,360
Jeli teraz to zapiszemy, otrzymamy posty, a jeli klikn na jeden, zobaczysz inny

40
00:03:09,370 --> 00:03:11,410
dziennik, poniewa wysano kolejne

41
00:03:11,410 --> 00:03:15,690
danie, a dla tego przechwytywacz dziaa, mimo e zosta

42
00:03:15,760 --> 00:03:21,580
zwolniony z innego komponentu, jak ju powiedziaem. komponenty, obejmuje to wszystkie obszary aplikacji.

43
00:03:22,180 --> 00:03:24,480
Teraz dla tego przechwytywacza

44
00:03:24,640 --> 00:03:31,210
moemy przekaza rwnie drug funkcj, oprcz funkcji zmiany konfiguracji dania, moemy

45
00:03:31,210 --> 00:03:35,150
doda funkcj, ktra obsuguje wszelkie bdy.

46
00:03:35,260 --> 00:03:40,060
Tak wic moemy zarejestrowa bd podobny do tego, powinnimy jednak rwnie zwrci

47
00:03:40,090 --> 00:03:47,860
bd obietnicy odrzucenia tutaj, tak abymy nadal przekazywali go do naszej proby, poniewa napisalimy to w komponencie, w ktrym

48
00:03:47,860 --> 00:03:53,590
moemy go ponownie obsuy metod catch, to ma sens, jeli masz jakie lokalne zadanie,

49
00:03:53,590 --> 00:04:00,340
ktre chcesz zrobi, jak pokaza co w interfejsie, ale take globalnie, chcesz zalogowa go do pliku dziennika,

50
00:04:00,340 --> 00:04:04,040
ktry wysyasz na serwer lub co w tym stylu.

51
00:04:04,450 --> 00:04:05,930
Zobaczmy wic, jak to

52
00:04:05,950 --> 00:04:13,510
dziaa, gdy teraz zapisz ten plik, a teraz zmieniam moje posty, mj adres URL postw zostanie ponownie nieprawidowy.

53
00:04:15,200 --> 00:04:21,410
Teraz widzisz, e co poszo nie tak, ale faktycznie nie widzisz dziennika konsoli z

54
00:04:21,410 --> 00:04:23,020
obsugi bdw, z przechwytywacza.

55
00:04:23,090 --> 00:04:28,390
Powodem tego jest to, e ten bd jest zwizany z wysaniem dania, na

56
00:04:28,430 --> 00:04:32,900
przykad, jeli nie masz poczenia z Internetem lub co podobnego, powinien

57
00:04:33,080 --> 00:04:40,670
pojawi si, wic jeli wysanie dania nie powiedzie si. Moemy rwnie doda przechwytywacz do obsugi odpowiedzi, ale robimy to w

58
00:04:40,670 --> 00:04:46,190
taki sam sposb, w jaki robimy to dla dania, ale uywamy obiektu odpowiedzi na obiekcie przechwytujcym.

59
00:04:46,190 --> 00:04:52,470
Nastpnie uywamy tu dwch funkcji, jednej funkcji i kopiuj j z gry, jednej

60
00:04:52,670 --> 00:05:00,250
funkcji, ktra otrzyma odpowied na sukces, moemy j rwnie zarejestrowa tutaj i powinnimy j zwrci,

61
00:05:00,350 --> 00:05:05,370
abymy mogli nadal uywa jej w komponencie w tym bloku.

62
00:05:05,450 --> 00:05:11,390
Jest to jeden sposb, w jaki powinnimy go zwrci, a take pobra bdy i

63
00:05:11,600 --> 00:05:16,760
powinnimy je odrzuci, abymy mogli nadal obsugiwa je w bloku catch w komponencie.

64
00:05:16,790 --> 00:05:23,150
Teraz z dodanym, z dodanym przechwytywaczem odpowiedzi i funkcj bdu, teraz, jeli

65
00:05:23,150 --> 00:05:23,930
wrcimy,

66
00:05:23,930 --> 00:05:28,330
faktycznie widzimy ten dziennik i nadal obsugujemy go

67
00:05:28,730 --> 00:05:30,790
lokalnie, wic oba dziaaj.

68
00:05:30,800 --> 00:05:33,760
Jeli przejd teraz do kontenera blokowego i

69
00:05:33,760 --> 00:05:36,170
ponownie zmieni mj adres URL

70
00:05:36,380 --> 00:05:39,350
na prawidowy URL, widzimy tylko dziennik odpowiedzi.

71
00:05:39,350 --> 00:05:43,460
Pochodzi wic od przechwytywacza, jak to wynika z nazwy

72
00:05:43,730 --> 00:05:52,160
pliku i numeru linii, i jest to inny sposb na potencjaln manipulacj t odpowiedzi, rejestrowanie jej lub robienie tego,

73
00:05:52,160 --> 00:05:53,260
co chcesz.

74
00:05:53,360 --> 00:05:57,740
Zatem moliwo zdefiniowania tych przechwytujcych moe by

75
00:05:57,770 --> 00:06:04,640
do potna, znowu bardzo czsto wykorzystywana jest sytuacja, w ktrej przechwytywacz da

76
00:06:04,640 --> 00:06:13,970
dodaje niektre wsplne nagwki, na przykad nagwek autoryzacji. Chocia mamy rwnie inny sposb dostpu do konfiguracji globalnych osi, poka ci,

77
00:06:13,970 --> 00:06:16,580
jak to dziaa w nastpnym wykadzie.

